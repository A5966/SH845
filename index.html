<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Log Dump Viewer</title>
<style>
    html, body {
        margin: 0;
        height: 100%;
        background: #111;
        color: #eee;
        overflow: auto;
        font-family: monospace;
    }

    /* container now holds dynamic rows */
    #container {
        width: 100%;
        min-height: 100%;
        font-family: monospace;
        color: #cdcdcd;
    }

    /* each printed line becomes a row */
    .log-row {
        display: flex;
        width: 100%;
    }

    /* line number column (fixed width, no background strip interference) */
    .log-row .ln {
        width: 8px;
        padding: 3px 10px;
        text-align: left;
        color: #555;
        background: #121212;
        border-right: 1px solid #333;
        white-space: pre;
    }

    /* log text takes all remaining space */
    .log-row .log-line {
        flex: 1;
        padding: 3px 6.5px;
        white-space: pre;
    }

    /* alternating full-row backgrounds */
    .log-row:nth-child(odd) {
        background: #1a1a1a;
    }

    .log-row:nth-child(even) {
        background: #2a2a2a;
    }
    #hiddenInput {
        opacity: 0;
        position: absolute;
        pointer-events: none;
        height: 0;
        width: 0;
    }
    
</style>
</head>
<body>

<!-- Paste your log dump here before opening the file -->
<textarea id="hiddenInput"><span style="color:#FF0000">Nothing to display.</span></textarea>

<div id="container"></div>

<script>
    const container = document.getElementById("container");
    const hiddenInput = document.getElementById("hiddenInput");

    let lineCount = 0;

    function pushLogDump(text) {
        text.split("\n").forEach(line => {
            lineCount++;

            const row = document.createElement("div");
            row.classList.add("log-row");

            const num = document.createElement("div");
            num.classList.add("ln");
            num.textContent = lineCount;

            const div = document.createElement("div");
            div.classList.add("log-line");
            div.innerHTML = line;

            row.appendChild(num);
            row.appendChild(div);
            container.appendChild(row);
        });
    }

    // Pushes a single inline log message, returns the row element to modify later
    function pushStatusLine(html) {
        lineCount++;

        const row = document.createElement("div");
        row.classList.add("log-row");

        const num = document.createElement("div");
        num.classList.add("ln");
        num.textContent = lineCount;

        const div = document.createElement("div");
        div.classList.add("log-line");
        div.innerHTML = html;

        row.appendChild(num);
        row.appendChild(div);
        container.appendChild(row);

        return div; // return element so we can edit it later
    }

    (function () {
        const url = new URL(window.location.href);
        const match = url.search.match(/\/p\/([A-Za-z0-9]+)/);

        if (match && match[1]) {
            const pasteID = match[1];
            const proxy = "https://cors-anywhere.com/";
            const pasteURL = `https://pastebin.com/raw/${pasteID}`;

            const statusLine = pushStatusLine(`<span style="color:#FF0000">Attempting to Connect</span>`);

            fetch(proxy + pasteURL)
                .then(r => r.text())
                .then(txt => {
                    // replace status line with actual log dump
                    statusLine.innerHTML = "";
                    pushLogDump(txt);
                })
                .catch(() => {
                    statusLine.innerHTML = `<span style="color:#FF0000">Error Connecting</span>`;
                });

        } else {
            pushLogDump(hiddenInput.value);
        }
    })();
</script>

</body>
</html>
